@(model: controllers.ApplicationModel)(implicit request: RequestHeader)

@import activator.properties.ActivatorProperties
@import play.api.libs.json.Json
@import snap.WebSocketUtil.webSocketURLWithCSRF

@name(app: snap.AppConfig) = {
  @app.cachedName.getOrElse(app.id)
}
@className(app: snap.AppConfig) = {@if(app.cachedName.getOrElse(app.id) == model.name) {default} else {}}

<!-- Copyright (C) 2013 Typesafe, Inc <http://typesafe.com> -->
<html>
  <head>
    <title>Typesafe Activator</title>
    <script type="text/javascript">
      window.debug = false;
      window.wsUrl = '@webSocketURLWithCSRF(routes.Application.connectApp(model.id))';
      window.consoleWsUrl = '@webSocketURLWithCSRF(routes.ConsoleController.connectConsole(model.id))';
      @* The @Html thing prevents the Json from being escaped *@
      window.serverAppModel = @Html(Json.toJson(model).toString())
      window.serverAppVersion = "@ActivatorProperties.APP_VERSION"
    </script>
    <script data-main='@routes.Assets.at("core/main.js")' type='text/javascript' src='@routes.WebJarAssets.requirejs()'></script>
  </head>
  <body data-bind="css: {'navigation-opened': navigationState, 'pannel-opened': pannelState }, attr: { 'data-shape': pannelShape }" style="background-color: rgb(151, 171, 184);"></body>
</html>
